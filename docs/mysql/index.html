<!doctype html><html lang=en dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="MySQL Memo #  Preparation #  Install to macOS #  $ brew install mysql Start #  $ mysql.server start Starting MySQL ....... SUCCESS! Check the vertion #  $ mysql --version mysql Ver 8.0.26 for macos11.3 on x86_64 (Homebrew) Make initial settings #  $ mysql_secure_installation  パスワード強度検証プラグインの利用有無 パスワード強度の選択 root ユーザのパスワード設定 匿名ユーザの削除 リモートからの root ユーザとしてのログインの禁止 サンプル用 test データベースの削除  $ mysql_secure_installation  Securing the MySQL server deployment. Connecting to MySQL using a blank password.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="MySQL Memo">
<meta property="og:description" content="MySQL Memo #  Preparation #  Install to macOS #  $ brew install mysql Start #  $ mysql.server start Starting MySQL ....... SUCCESS! Check the vertion #  $ mysql --version mysql Ver 8.0.26 for macos11.3 on x86_64 (Homebrew) Make initial settings #  $ mysql_secure_installation  パスワード強度検証プラグインの利用有無 パスワード強度の選択 root ユーザのパスワード設定 匿名ユーザの削除 リモートからの root ユーザとしてのログインの禁止 サンプル用 test データベースの削除  $ mysql_secure_installation  Securing the MySQL server deployment. Connecting to MySQL using a blank password.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://exaream.github.io/tech-blog/mysql/"><meta property="article:section" content>
<meta property="article:published_time" content="2020-01-01T00:00:00+00:00">
<meta property="article:modified_time" content="2020-01-01T00:00:00+00:00">
<title>MySQL Memo | Tech Blog</title>
<link rel=manifest href=/tech-blog/manifest.json>
<link rel=icon href=/tech-blog/favicon.png type=image/x-icon>
<link rel=stylesheet href=/tech-blog/book.min.4944a240c46d7765e4332a41d225ee13464caa633f4b84869232d60e2b118f03.css integrity="sha256-SUSiQMRtd2XkMypB0iXuE0ZMqmM/S4SGkjLWDisRjwM=" crossorigin=anonymous>
<script defer src=/tech-blog/flexsearch.min.js></script>
<script defer src=/tech-blog/en.search.min.7fc40d3ee58fab420df6ff8d7be50f960d760b1234028c72bc5ff3314cd6f1ef.js integrity="sha256-f8QNPuWPq0IN9v+Ne+UPlg12CxI0AoxyvF/zMUzW8e8=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/tech-blog/><span>Tech Blog</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<div class=book-languages tabindex=0 aria-haspopup=true>
<ul>
<li class="flex align-center">
<img src=/tech-blog/svg/translate.svg class=book-icon alt=Languages>
English
</li>
</ul>
<ul class=book-languages-list>
<li>
<a href=https://exaream.github.io/tech-blog/ja/ class="flex align-center">
<img src=/tech-blog/svg/translate.svg class=book-icon alt=Languages>
日本語
</a>
</li>
</ul>
</div>
<h3 id=menu>
Menu
<a class=anchor href=#menu>#</a>
</h3>
<ul>
<li><strong>Git</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/git/memo/>Git Memo</a></li>
<li><a href=https://exaream.github.io/tech-blog/git/tool/>Git Tool</a></li>
</ul>
</li>
<li><strong>Docker</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/docker/memo/>Docker Memo</a></li>
<li><a href=https://exaream.github.io/tech-blog/docker/docker-compose/>Docker Compose</a></li>
<li><a href=https://exaream.github.io/tech-blog/docker/docker-swarm/>Docker Swarm</a></li>
</ul>
</li>
<li><strong>SQL</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/mysql/>MySQL Memo</a></li>
<li><a href=https://exaream.github.io/tech-blog/postgresql/>PostgreSQL Memo</a></li>
</ul>
</li>
<li><strong>Go</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/go/memo/>Go Memo</a></li>
<li><a href=https://exaream.github.io/tech-blog/go/test/>Go Test</a></li>
<li><a href=https://exaream.github.io/tech-blog/go/link/>Go Link</a></li>
</ul>
</li>
<li><strong>Linux</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/linux/memo/>Linux Memo</a></li>
<li><a href=https://exaream.github.io/tech-blog/linux/ubuntu/>Ubuntu</a></li>
<li><a href=https://exaream.github.io/tech-blog/linux/alpine-linux/>Alpine Linux</a></li>
</ul>
</li>
<li><strong>Python</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/python/memo/>Python Memo</a></li>
<li><a href=https://exaream.github.io/tech-blog/python/ocr/>Python OCR</a></li>
</ul>
</li>
<li><strong>PHP</strong>
<ul>
<li><a href=https://exaream.github.io/tech-blog/php/phpunit/>PHPUnit</a></li>
<li><a href=https://exaream.github.io/tech-blog/php/phpmetrics/>PhpMetrics</a></li>
</ul>
</li>
</ul>
<ul>
<li><a href=https://exaream.github.io/tech-blog/tool/mac/>Mac</a></li>
<li><a href=https://exaream.github.io/tech-blog/tool/iterm2/>iTerm2</a></li>
<li><a href=https://exaream.github.io/tech-blog/tool/hugo/>Hugo</a></li>
<li><a href=https://exaream.github.io/tech-blog/node/memo/>Node</a></li>
<li><a href=https://exaream.github.io/tech-blog/tool/vscode/>VS Code</a></li>
<li><a href=https://exaream.github.io/tech-blog/tool/excel/>Excel</a></li>
<li><a href=https://exaream.github.io/tech-blog/tool/mailcatcher/>MailCatcher</a></li>
<li><a href=https://exaream.github.io/tech-blog/glossary/>Glossary</a></li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/tech-blog/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>MySQL Memo</strong>
<label for=toc-control>
<img src=/tech-blog/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<h2>Tags</h2>
<ul class=tags><li><a href=/tech-blog/tags/sql>SQL</a><li><a href=/tech-blog/tags/mysql>MySQL</a><li><a href=/tech-blog/tags/memo>Memo</a></ul>
<h2>Table of Contents</h2>
<nav id=TableOfContents>
<ul>
<li><a href=#preparation>Preparation</a>
<ul>
<li><a href=#install-to-macos>Install to macOS</a></li>
<li><a href=#start>Start</a></li>
<li><a href=#check-the-vertion>Check the vertion</a></li>
<li><a href=#make-initial-settings>Make initial settings</a></li>
</ul>
</li>
<li><a href=#ログイン>ログイン</a></li>
<li><a href=#mysqlの情報>MySQLの情報</a>
<ul>
<li><a href=#バージョン>バージョン</a></li>
<li><a href=#タイムゾーン>タイムゾーン</a></li>
<li><a href=#文字コード>文字コード</a></li>
</ul>
</li>
<li><a href=#データベーステーブルカラムの一覧>データベース/テーブル/カラムの一覧</a>
<ul>
<li><a href=#データベースの一覧>データベースの一覧</a></li>
<li><a href=#テーブルの一覧>テーブルの一覧</a></li>
<li><a href=#テーブルごとの自動採番-auto_increment-の一覧>テーブルごとの自動採番 AUTO_INCREMENT の一覧</a></li>
<li><a href=#テーブルごとのカラムの一覧カンマ区切り>テーブルごとのカラムの一覧（カンマ区切り）</a></li>
<li><a href=#テーブルの物理名と論理名テーブルコメントの一覧>テーブルの物理名と論理名（テーブル・コメント）の一覧</a></li>
<li><a href=#カラムの物理名と論理名カラムコメントの一覧>カラムの物理名と論理名（カラム・コメント）の一覧</a></li>
<li><a href=#特定のカラムを含むテーブルの一覧>特定のカラムを含むテーブルの一覧</a></li>
<li><a href=#インデックスの一覧>インデックスの一覧</a></li>
<li><a href=#ビューの一覧>ビューの一覧</a></li>
</ul>
</li>
<li><a href=#テーブルのキー情報の一覧>テーブルのキー情報の一覧</a>
<ul>
<li><a href=#テーブルごとのプライマリーキー制約の一覧>テーブルごとのプライマリーキー制約の一覧</a></li>
<li><a href=#テーブルごとのユニークキー制約の一覧>テーブルごとのユニークキー制約の一覧</a></li>
<li><a href=#テーブルごとの外部キー制約の一覧>テーブルごとの外部キー制約の一覧</a></li>
<li><a href=#テーブルごとのプライマリーキーユニークキー外部キー一覧>テーブルごとのプライマリーキー・ユニークキー・外部キー一覧</a></li>
</ul>
</li>
<li><a href=#データ容量の一覧>データ容量の一覧</a>
<ul>
<li><a href=#データベースごとのサイズの一覧>データベースごとのサイズの一覧</a></li>
<li><a href=#データベースごとのテーブル数の一覧>データベースごとのテーブル数の一覧</a></li>
<li><a href=#テーブルごとのサイズの一覧>テーブルごとのサイズの一覧</a></li>
<li><a href=#テーブルごとのレコード数の一覧>テーブルごとのレコード数の一覧</a></li>
<li><a href=#データベーステーブルごとの件数容量カラムキー情報文字コードauto_incrementの一覧>データベース/テーブルごとの件数/容量/カラム/キー情報/文字コード/AUTO_INCREMENTの一覧</a></li>
</ul>
</li>
<li><a href=#データベース>データベース</a>
<ul>
<li><a href=#データベースの新規作成>データベースの新規作成</a></li>
<li><a href=#データベースの文字コードの変更>データベースの文字コードの変更</a></li>
</ul>
</li>
<li><a href=#ユーザー>ユーザー</a>
<ul>
<li><a href=#ユーザーの新規作成>ユーザーの新規作成</a></li>
<li><a href=#ユーザーのパスワードの設定>ユーザーのパスワードの設定</a></li>
<li><a href=#ユーザーの権限の設定>ユーザーの権限の設定</a></li>
</ul>
</li>
<li><a href=#権限>権限</a>
<ul>
<li><a href=#ユーザーごとの権限の一覧>ユーザーごとの権限の一覧</a></li>
<li><a href=#データベースごとの権限の一覧>データベースごとの権限の一覧</a></li>
<li><a href=#テーブルごとの権限の一覧>テーブルごとの権限の一覧</a></li>
<li><a href=#カラムごとの権限の一覧>カラムごとの権限の一覧</a></li>
<li><a href=#ユーザーごとデータベースごとテーブルごとカラムごとの権限の一覧>ユーザーごと・データベースごと・テーブルごと・カラムごとの権限の一覧</a></li>
</ul>
</li>
<li><a href=#日付時刻>日付・時刻</a>
<ul>
<li><a href=#現在時刻>現在時刻</a></li>
<li><a href=#現在時刻の時刻のみ>現在時刻の時刻のみ</a></li>
<li><a href=#今日>今日</a></li>
<li><a href=#昨日>昨日</a></li>
<li><a href=#明日>明日</a></li>
<li><a href=#1週間前>1週間前</a></li>
<li><a href=#1週間後>1週間後</a></li>
<li><a href=#当月1日>当月1日</a></li>
<li><a href=#当月末日>当月末日</a></li>
<li><a href=#当月1日当月末日>当月1日〜当月末日</a></li>
<li><a href=#先月1日>先月1日</a></li>
<li><a href=#先月末日>先月末日</a></li>
<li><a href=#来月1日>来月1日</a></li>
<li><a href=#来月末日>来月末日</a></li>
<li><a href=#昨年>昨年</a></li>
<li><a href=#来年>来年</a></li>
<li><a href=#3年前>3年前</a></li>
<li><a href=#3年後>3年後</a></li>
<li><a href=#日付の差分>日付の差分</a></li>
<li><a href=#年のみ>年のみ</a></li>
<li><a href=#月のみ>月のみ</a></li>
<li><a href=#日のみ>日のみ</a></li>
<li><a href=#曜日>曜日</a></li>
<li><a href=#曜日日本語>曜日（日本語）</a></li>
<li><a href=#年内の歴週>年内の歴週</a></li>
<li><a href=#年内の通日>年内の通日</a></li>
</ul>
</li>
<li><a href=#便利関数>便利関数</a>
<ul>
<li><a href=#値がnullの場合の初期値を返却-ifnull>値がNULLの場合の初期値を返却 IFNULL</a></li>
<li><a href=#最初のnull以外の値を返却-coalesce>最初のNULL以外の値を返却 COALESCE</a></li>
<li><a href=#カンマ区切りで結合-group_concat>カンマ区切りで結合 GROUP_CONCAT</a></li>
<li><a href=#カンマ区切りの値を検索-find_in_set>カンマ区切りの値を検索 FIND_IN_SET</a></li>
<li><a href=#指定した順番に並べ替え-field>指定した順番に並べ替え FIELD</a></li>
</ul>
</li>
<li><a href=#条件分岐-case>条件分岐 CASE</a></li>
<li><a href=#便利sql>便利SQL</a>
<ul>
<li><a href=#select句の値を変数にセット>SELECT句の値を変数にセット</a></li>
<li><a href=#select-したデータを-insert>SELECT したデータを INSERT</a></li>
<li><a href=#特定のカラムの値が重複しているレコードを抽出-havinggroup-by>特定のカラムの値が重複しているレコードを抽出 HAVING/GROUP BY</a></li>
</ul>
</li>
<li><a href=#置換>置換</a>
<ul>
<li><a href=#文字列を置換して更新>文字列を置換して更新</a></li>
</ul>
</li>
<li><a href=#改行コード>改行コード</a>
<ul>
<li><a href=#carriage-return-cr>Carriage Return (CR)</a></li>
<li><a href=#line-feed-lf>Line Feed (LF)</a></li>
<li><a href=#改行コードを半角スペースに置換>改行コードを半角スペースに置換</a></li>
</ul>
</li>
<li><a href=#view>VIEW</a>
<ul>
<li><a href=#viewの一括drop文>VIEWの一括DROP文</a></li>
<li><a href=#viewの一覧を作成するcreate文の一覧>VIEWの一覧を作成するCREATE文の一覧</a></li>
</ul>
</li>
<li><a href=#その他>その他</a>
<ul>
<li><a href=#sqlの実行計画>SQLの実行計画</a></li>
<li><a href=#一時的なテーブルの作成>一時的なテーブルの作成</a></li>
<li><a href=#データベースへのコネクション数>データベースへのコネクション数</a></li>
<li><a href=#プロセスを終了kill>プロセスを終了(KILL)</a></li>
<li><a href=#特定の時間を経過しているプロセスを確認>特定の時間を経過しているプロセスを確認</a></li>
<li><a href=#複数のプロセスを終了kill>複数のプロセスを終了(KILL)</a></li>
<li><a href=#テーブルのロック状態>テーブルのロック状態</a></li>
<li><a href=#トランザクション>トランザクション</a></li>
</ul>
</li>
<li><a href=#auto_increment自動採番>AUTO_INCREMENT（自動採番）</a>
<ul>
<li><a href=#auto_increment自動採番の値を確認>AUTO_INCREMENT（自動採番）の値を確認</a></li>
<li><a href=#auto_increment自動採番の値を変更>AUTO_INCREMENT（自動採番）の値を変更</a></li>
</ul>
</li>
<li><a href=#設定>設定</a>
<ul>
<li><a href=#トランザクションのタイムアウト>トランザクションのタイムアウト</a></li>
</ul>
</li>
<li><a href=#暗号化>暗号化</a></li>
</ul>
</nav>
</aside>
</header>
<ol class=breadcrumb>
<li>
<a href=https://exaream.github.io/tech-blog/>Tech Blog</a>
</li>
<li class=active>
<a href=https://exaream.github.io/tech-blog/mysql/>MySQL Memo</a>
</li>
</ol>
<article class=markdown><h1 id=mysql-memo>
MySQL Memo
<a class=anchor href=#mysql-memo>#</a>
</h1>
<h2 id=preparation>
Preparation
<a class=anchor href=#preparation>#</a>
</h2>
<h3 id=install-to-macos>
Install to macOS
<a class=anchor href=#install-to-macos>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ brew install mysql
</code></pre></div><h3 id=start>
Start
<a class=anchor href=#start>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql.server start
Starting MySQL
....... SUCCESS!
</code></pre></div><h3 id=check-the-vertion>
Check the vertion
<a class=anchor href=#check-the-vertion>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql --version
mysql  Ver 8.0.26 <span style=color:#66d9ef>for</span> macos11.3 on x86_64 <span style=color:#f92672>(</span>Homebrew<span style=color:#f92672>)</span>
</code></pre></div><h3 id=make-initial-settings>
Make initial settings
<a class=anchor href=#make-initial-settings>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql_secure_installation
</code></pre></div><ul>
<li>パスワード強度検証プラグインの利用有無</li>
<li>パスワード強度の選択</li>
<li>root ユーザのパスワード設定</li>
<li>匿名ユーザの削除</li>
<li>リモートからの root ユーザとしてのログインの禁止</li>
<li>サンプル用 test データベースの削除</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:block;width:100%;background-color:#3c3d38>$ mysql_secure_installation
</span>
Securing the MySQL server deployment.

Connecting to MySQL using a blank password.

VALIDATE PASSWORD COMPONENT can be used to test passwords
and improve security. It checks the strength of password
and allows the users to set only those passwords which are
secure enough. Would you like to setup VALIDATE PASSWORD component?
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#75715e>### パスワード強度検証プラグインの利用</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No: y <span style=color:#75715e>### y と入力</span>
</span>
There are three levels of password validation policy:

LOW    Length &gt;<span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>
MEDIUM Length &gt;<span style=color:#f92672>=</span> 8, numeric, mixed <span style=color:#66d9ef>case</span>, and special characters
STRONG Length &gt;<span style=color:#f92672>=</span> 8, numeric, mixed <span style=color:#66d9ef>case</span>, special characters and dictionary file
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#75715e>### パスワード検証ポリシーの選択</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>Please enter 0 <span style=color:#f92672>=</span> LOW, 1 <span style=color:#f92672>=</span> MEDIUM and 2 <span style=color:#f92672>=</span> STRONG: 2　<span style=color:#75715e>### 2 と入力</span>
</span>
Please set the password <span style=color:#66d9ef>for</span> root here.

<span style=display:block;width:100%;background-color:#3c3d38>New password: <span style=color:#75715e>### rootユーザー用のパスワードを入力</span>
</span>
<span style=display:block;width:100%;background-color:#3c3d38>Re-enter new password: <span style=color:#75715e>### rootユーザー用のパスワードを再入力</span>
</span>
Estimated strength of the password: <span style=color:#ae81ff>100</span>
Do you wish to <span style=color:#66d9ef>continue</span> with the password provided?
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> : y　<span style=color:#75715e>### y と入力</span>
</span>By default, a MySQL installation has an anonymous user,
allowing anyone to log into MySQL without having to have
a user account created <span style=color:#66d9ef>for</span> them. This is intended only <span style=color:#66d9ef>for</span>
testing, and to make the installation go a bit smoother.
You should remove them before moving into a production
environment.
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#75715e>### 匿名ユーザーの削除</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>Remove anonymous users? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> : y <span style=color:#75715e>### y と入力</span>
</span>Success.


Normally, root should only be allowed to connect from
<span style=color:#e6db74>&#39;localhost&#39;</span>. This ensures that someone cannot guess at
the root password from the network.
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#75715e>### リモートからの root ログインの拒否</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>Disallow root login remotely? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> : y <span style=color:#75715e>### y と入力</span>
</span>Success.

By default, MySQL comes with a database named <span style=color:#e6db74>&#39;test&#39;</span> that
anyone can access. This is also intended only <span style=color:#66d9ef>for</span> testing,
and should be removed before moving into a production
environment.

<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#75715e>### test データベースの削除</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>Remove test database and access to it? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> : y　<span style=color:#75715e>### y と入力</span>
</span> - Dropping test database...
Success.

 - Removing privileges on test database...
Success.

Reloading the privilege tables will ensure that all changes
made so far will take effect immediately.
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#75715e>### 特権テーブルの即時適用</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>Reload privilege tables now? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> : y　<span style=color:#75715e>### y と入力</span>
</span>Success.

All <span style=color:#66d9ef>done</span>! 
</code></pre></div><h2 id=ログイン>
ログイン
<a class=anchor href=#%e3%83%ad%e3%82%b0%e3%82%a4%e3%83%b3>#</a>
</h2>
<p>e.g) rootユーザーでのログイン</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql -uroot -p
Enter password: <span style=color:#75715e>### 設定したパスワードを入力</span>
</code></pre></div><h2 id=mysqlの情報>
MySQLの情報
<a class=anchor href=#mysql%e3%81%ae%e6%83%85%e5%a0%b1>#</a>
</h2>
<h3 id=バージョン>
バージョン
<a class=anchor href=#%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>VERSION</span>();
</code></pre></div><h3 id=タイムゾーン>
タイムゾーン
<a class=anchor href=#%e3%82%bf%e3%82%a4%e3%83%a0%e3%82%be%e3%83%bc%e3%83%b3>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%time_zone%&#39;</span>;
</code></pre></div><h3 id=文字コード>
文字コード
<a class=anchor href=#%e6%96%87%e5%ad%97%e3%82%b3%e3%83%bc%e3%83%89>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%character\_set\_%&#39;</span>;
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;collation%&#39;</span>;
</code></pre></div><h2 id=データベーステーブルカラムの一覧>
データベース/テーブル/カラムの一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%82%ab%e3%83%a9%e3%83%a0%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h2>
<h3 id=データベースの一覧>
データベースの一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>DATABASES</span>;
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#66d9ef>DISTINCT</span> table_schema <span style=color:#66d9ef>AS</span> database_name
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema;
</code></pre></div><h3 id=テーブルの一覧>
テーブルの一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>USE</span> sample_database;
<span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>TABLES</span>;
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>TABLES</span> <span style=color:#66d9ef>FROM</span> sample_database;
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
    <span style=color:#66d9ef>AND</span> table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_type,
    table_name;
</code></pre></div><h3 id=テーブルごとの自動採番-auto_increment-の一覧>
テーブルごとの自動採番 AUTO_INCREMENT の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e8%87%aa%e5%8b%95%e6%8e%a1%e7%95%aa-auto_increment-%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    <span style=color:#66d9ef>auto_increment</span>
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
    <span style=color:#66d9ef>AND</span> table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><h3 id=テーブルごとのカラムの一覧カンマ区切り>
テーブルごとのカラムの一覧（カンマ区切り）
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e3%82%ab%e3%83%a9%e3%83%a0%e3%81%ae%e4%b8%80%e8%a6%a7%e3%82%ab%e3%83%b3%e3%83%9e%e5%8c%ba%e5%88%87%e3%82%8a>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(column_name) <span style=color:#66d9ef>AS</span> column_names
<span style=color:#66d9ef>FROM</span>
    information_schema.columns
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name
</code></pre></div><h3 id=テーブルの物理名と論理名テーブルコメントの一覧>
テーブルの物理名と論理名（テーブル・コメント）の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e7%89%a9%e7%90%86%e5%90%8d%e3%81%a8%e8%ab%96%e7%90%86%e5%90%8d%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%82%b3%e3%83%a1%e3%83%b3%e3%83%88%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> databae_name,
    table_name,
    table_comment
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sample_database&#39;</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><h3 id=カラムの物理名と論理名カラムコメントの一覧>
カラムの物理名と論理名（カラム・コメント）の一覧
<a class=anchor href=#%e3%82%ab%e3%83%a9%e3%83%a0%e3%81%ae%e7%89%a9%e7%90%86%e5%90%8d%e3%81%a8%e8%ab%96%e7%90%86%e5%90%8d%e3%82%ab%e3%83%a9%e3%83%a0%e3%82%b3%e3%83%a1%e3%83%b3%e3%83%88%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> databae_name,
    table_name,
    column_name,
    column_comment
<span style=color:#66d9ef>FROM</span>
    information_schema.columns
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name; 
</code></pre></div><h3 id=特定のカラムを含むテーブルの一覧>
特定のカラムを含むテーブルの一覧
<a class=anchor href=#%e7%89%b9%e5%ae%9a%e3%81%ae%e3%82%ab%e3%83%a9%e3%83%a0%e3%82%92%e5%90%ab%e3%82%80%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> databae_name,
    table_name,
    column_name,
    column_comment
<span style=color:#66d9ef>FROM</span>
    information_schema.columns
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
    <span style=color:#66d9ef>AND</span> column_name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%sample_column%&#39;</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name,
    column_name;
</code></pre></div><h3 id=インデックスの一覧>
インデックスの一覧
<a class=anchor href=#%e3%82%a4%e3%83%b3%e3%83%87%e3%83%83%e3%82%af%e3%82%b9%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    column_name,
    index_name
<span style=color:#66d9ef>FROM</span>
    information_schema.statistics
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name,
    column_name;
</code></pre></div><h3 id=ビューの一覧>
ビューの一覧
<a class=anchor href=#%e3%83%93%e3%83%a5%e3%83%bc%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name <span style=color:#66d9ef>AS</span> view_name
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
    <span style=color:#66d9ef>AND</span> table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;VIEW&#39;</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><h2 id=テーブルのキー情報の一覧>
テーブルのキー情報の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e3%82%ad%e3%83%bc%e6%83%85%e5%a0%b1%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h2>
<h3 id=テーブルごとのプライマリーキー制約の一覧>
テーブルごとのプライマリーキー制約の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e3%83%97%e3%83%a9%e3%82%a4%e3%83%9e%e3%83%aa%e3%83%bc%e3%82%ad%e3%83%bc%e5%88%b6%e7%b4%84%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    column_name <span style=color:#66d9ef>AS</span> primary_key
<span style=color:#66d9ef>FROM</span>
    information_schema.KEY_COLUMN_USAGE
<span style=color:#66d9ef>WHERE</span>
    constraint_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;PRIMARY&#39;</span>;
</code></pre></div><h3 id=テーブルごとのユニークキー制約の一覧>
テーブルごとのユニークキー制約の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e3%83%a6%e3%83%8b%e3%83%bc%e3%82%af%e3%82%ad%e3%83%bc%e5%88%b6%e7%b4%84%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(column_name) <span style=color:#66d9ef>AS</span> unique_keys
<span style=color:#66d9ef>FROM</span>
    information_schema.KEY_COLUMN_USAGE
<span style=color:#66d9ef>WHERE</span>
    position_in_unique_constraint <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><h3 id=テーブルごとの外部キー制約の一覧>
テーブルごとの外部キー制約の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e5%a4%96%e9%83%a8%e3%82%ad%e3%83%bc%e5%88%b6%e7%b4%84%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(
        <span style=color:#a6e22e>CONCAT</span>(
            column_name,
            <span style=color:#e6db74>&#39;=&#39;</span>,
            referenced_table_name,
            <span style=color:#e6db74>&#39;.&#39;</span>,
            referenced_column_name
        )
    ) <span style=color:#66d9ef>AS</span> referenced
<span style=color:#66d9ef>FROM</span>
    information_schema.KEY_COLUMN_USAGE
<span style=color:#66d9ef>WHERE</span>
    referenced_table_name <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><h3 id=テーブルごとのプライマリーキーユニークキー外部キー一覧>
テーブルごとのプライマリーキー・ユニークキー・外部キー一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e3%83%97%e3%83%a9%e3%82%a4%e3%83%9e%e3%83%aa%e3%83%bc%e3%82%ad%e3%83%bc%e3%83%a6%e3%83%8b%e3%83%bc%e3%82%af%e3%82%ad%e3%83%bc%e5%a4%96%e9%83%a8%e3%82%ad%e3%83%bc%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_info.<span style=color:#f92672>*</span>,
    primary_info.primary_key,
    unique_info.unique_keys,
    reference_info.referenced
<span style=color:#66d9ef>FROM</span>
    (
        <span style=color:#66d9ef>SELECT</span>
            table_schema <span style=color:#66d9ef>AS</span> database_name,
            table_name
        <span style=color:#66d9ef>FROM</span>
            information_schema.<span style=color:#66d9ef>tables</span>
        <span style=color:#66d9ef>WHERE</span>
            table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
    ) <span style=color:#66d9ef>AS</span> table_info
    <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
        <span style=color:#66d9ef>SELECT</span>
            table_schema <span style=color:#66d9ef>AS</span> database_name,
            table_name,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(column_name) <span style=color:#66d9ef>AS</span> unique_keys
        <span style=color:#66d9ef>FROM</span>
            information_schema.KEY_COLUMN_USAGE
        <span style=color:#66d9ef>WHERE</span>
            position_in_unique_constraint <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            table_schema,
            table_name
    ) <span style=color:#66d9ef>AS</span> unique_info <span style=color:#66d9ef>ON</span> table_info.database_name <span style=color:#f92672>=</span> unique_info.database_name
    <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> unique_info.table_name
    <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
        <span style=color:#66d9ef>SELECT</span>
            table_schema <span style=color:#66d9ef>AS</span> database_name,
            table_name,
            column_name <span style=color:#66d9ef>AS</span> primary_key
        <span style=color:#66d9ef>FROM</span>
            information_schema.KEY_COLUMN_USAGE
        <span style=color:#66d9ef>WHERE</span>
            constraint_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;PRIMARY&#39;</span>
    ) <span style=color:#66d9ef>AS</span> primary_info <span style=color:#66d9ef>ON</span> table_info.database_name <span style=color:#f92672>=</span> primary_info.database_name
    <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> primary_info.table_name
    <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
        <span style=color:#66d9ef>SELECT</span>
            table_schema <span style=color:#66d9ef>AS</span> database_name,
            table_name,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(
                <span style=color:#a6e22e>CONCAT</span>(
                    column_name,
                    <span style=color:#e6db74>&#39;=&#39;</span>,
                    referenced_table_name,
                    <span style=color:#e6db74>&#39;.&#39;</span>,
                    referenced_column_name
                )
            ) <span style=color:#66d9ef>AS</span> referenced
        <span style=color:#66d9ef>FROM</span>
            information_schema.KEY_COLUMN_USAGE
        <span style=color:#66d9ef>WHERE</span>
            referenced_table_name <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            table_schema,
            table_name
    ) <span style=color:#66d9ef>AS</span> reference_info <span style=color:#66d9ef>ON</span> table_info.database_name <span style=color:#f92672>=</span> reference_info.database_name
    <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> reference_info.table_name
</code></pre></div><h2 id=データ容量の一覧>
データ容量の一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e5%ae%b9%e9%87%8f%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h2>
<h3 id=データベースごとのサイズの一覧>
データベースごとのサイズの一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%94%e3%81%a8%e3%81%ae%e3%82%b5%e3%82%a4%e3%82%ba%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    <span style=color:#a6e22e>CONCAT</span>(
        <span style=color:#a6e22e>SUM</span>(data_length <span style=color:#f92672>+</span> index_length) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1024</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1024</span>),
        <span style=color:#e6db74>&#39; MB&#39;</span>
    ) <span style=color:#66d9ef>AS</span> db_size
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    table_schema
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema;
</code></pre></div><h3 id=データベースごとのテーブル数の一覧>
データベースごとのテーブル数の一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%94%e3%81%a8%e3%81%ae%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e6%95%b0%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    <span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>AS</span> table_count
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    table_schema;
</code></pre></div><h3 id=テーブルごとのサイズの一覧>
テーブルごとのサイズの一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e3%82%b5%e3%82%a4%e3%82%ba%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    <span style=color:#a6e22e>CONCAT</span>(
        (data_length <span style=color:#f92672>+</span> index_length) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1024</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1024</span>),
        <span style=color:#e6db74>&#39; MB&#39;</span>
    ) <span style=color:#66d9ef>AS</span> table_size
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
    <span style=color:#66d9ef>AND</span> table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    (data_length <span style=color:#f92672>+</span> index_length) <span style=color:#66d9ef>DESC</span>,
    table_name;
</code></pre></div><h3 id=テーブルごとのレコード数の一覧>
テーブルごとのレコード数の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e3%83%ac%e3%82%b3%e3%83%bc%e3%83%89%e6%95%b0%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>AS</span> database_name,
    table_name,
    table_rows
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span>target<span style=color:#f92672>`</span>
<span style=color:#66d9ef>WHERE</span>
    table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
    <span style=color:#66d9ef>AND</span> table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_rows <span style=color:#66d9ef>DESC</span>,
    table_name;
</code></pre></div><h3 id=データベーステーブルごとの件数容量カラムキー情報文字コードauto_incrementの一覧>
データベース/テーブルごとの件数/容量/カラム/キー情報/文字コード/AUTO_INCREMENTの一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e4%bb%b6%e6%95%b0%e5%ae%b9%e9%87%8f%e3%82%ab%e3%83%a9%e3%83%a0%e3%82%ad%e3%83%bc%e6%83%85%e5%a0%b1%e6%96%87%e5%ad%97%e3%82%b3%e3%83%bc%e3%83%89auto_increment%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_info.table_schema <span style=color:#66d9ef>AS</span> database_name,
    database_info.table_count,
    database_info.db_size,
    table_info.table_name,
    table_info.table_rows,
    table_info.table_size,
    columns_info.column_names,
    key_info.primary_key,
    key_info.unique_keys,
    key_info.referenced,
    table_info.<span style=color:#66d9ef>auto_increment</span>,
    table_info.table_collation <span style=color:#66d9ef>AS</span> character_info
<span style=color:#66d9ef>FROM</span>
    (
        <span style=color:#75715e>-- 全テーブル情報
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>SELECT</span>
            <span style=color:#f92672>*</span>,
            <span style=color:#a6e22e>CONCAT</span>(
                (data_length <span style=color:#f92672>+</span> index_length) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1024</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1024</span>),
                <span style=color:#e6db74>&#39; MB&#39;</span>
            ) <span style=color:#66d9ef>AS</span> table_size
        <span style=color:#66d9ef>FROM</span>
            information_schema.<span style=color:#66d9ef>tables</span>
        <span style=color:#66d9ef>WHERE</span>
            table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
                <span style=color:#e6db74>&#39;mysql&#39;</span>,
                <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
                <span style=color:#e6db74>&#39;information_schema&#39;</span>
            )
            <span style=color:#66d9ef>AND</span> table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
    ) <span style=color:#66d9ef>AS</span> table_info
    <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
        <span style=color:#75715e>-- データベースの容量とテーブル数
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>SELECT</span>
            table_schema <span style=color:#66d9ef>AS</span> database_name,
            <span style=color:#a6e22e>CONCAT</span>(
                <span style=color:#a6e22e>SUM</span>(data_length <span style=color:#f92672>+</span> index_length) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1024</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1024</span>),
                <span style=color:#e6db74>&#39; MB&#39;</span>
            ) <span style=color:#66d9ef>AS</span> db_size,
            <span style=color:#a6e22e>SUM</span>(
                <span style=color:#66d9ef>CASE</span>
                    <span style=color:#66d9ef>WHEN</span> table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>1</span>
                    <span style=color:#66d9ef>ELSE</span> <span style=color:#ae81ff>0</span>
                END
            ) <span style=color:#66d9ef>AS</span> table_count
        <span style=color:#66d9ef>FROM</span>
            information_schema.<span style=color:#66d9ef>tables</span>
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            table_schema
    ) <span style=color:#66d9ef>AS</span> database_info <span style=color:#66d9ef>ON</span> table_info.table_schema <span style=color:#f92672>=</span> database_info.database_name
    <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
        <span style=color:#75715e>-- テーブルごとのカラム
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>SELECT</span>
            table_schema <span style=color:#66d9ef>AS</span> database_name,
            table_name,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(column_name) <span style=color:#66d9ef>AS</span> column_names
        <span style=color:#66d9ef>FROM</span>
            information_schema.columns
        <span style=color:#66d9ef>WHERE</span>
            table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
                <span style=color:#e6db74>&#39;mysql&#39;</span>,
                <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
                <span style=color:#e6db74>&#39;information_schema&#39;</span>
            )
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            table_schema,
            table_name
    ) <span style=color:#66d9ef>AS</span> columns_info <span style=color:#66d9ef>ON</span> table_info.table_schema <span style=color:#f92672>=</span> columns_info.database_name
    <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> columns_info.table_name
    <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
        <span style=color:#75715e>-- テーブルのキー情報（プライマリーキー、ユニークキー、外部キー）
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>SELECT</span>
            table_info.<span style=color:#f92672>*</span>,
            primary_info.primary_key,
            unique_info.unique_keys,
            reference_info.referenced
        <span style=color:#66d9ef>FROM</span>
            (
                <span style=color:#66d9ef>SELECT</span>
                    table_schema <span style=color:#66d9ef>AS</span> database_name,
                    table_name
                <span style=color:#66d9ef>FROM</span>
                    information_schema.<span style=color:#66d9ef>tables</span>
                <span style=color:#66d9ef>WHERE</span>
                    table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;BASE TABLE&#39;</span>
            ) <span style=color:#66d9ef>AS</span> table_info
            <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
                <span style=color:#66d9ef>SELECT</span>
                    table_schema <span style=color:#66d9ef>AS</span> database_name,
                    table_name,
                    <span style=color:#a6e22e>GROUP_CONCAT</span>(column_name) <span style=color:#66d9ef>AS</span> unique_keys
                <span style=color:#66d9ef>FROM</span>
                    information_schema.KEY_COLUMN_USAGE
                <span style=color:#66d9ef>WHERE</span>
                    position_in_unique_constraint <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
                <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
                    table_schema,
                    table_name
            ) <span style=color:#66d9ef>AS</span> unique_info <span style=color:#66d9ef>ON</span> table_info.database_name <span style=color:#f92672>=</span> unique_info.database_name
            <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> unique_info.table_name
            <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
                <span style=color:#66d9ef>SELECT</span>
                    table_schema <span style=color:#66d9ef>AS</span> database_name,
                    table_name,
                    column_name <span style=color:#66d9ef>AS</span> primary_key
                <span style=color:#66d9ef>FROM</span>
                    information_schema.KEY_COLUMN_USAGE
                <span style=color:#66d9ef>WHERE</span>
                    constraint_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;PRIMARY&#39;</span>
            ) <span style=color:#66d9ef>AS</span> primary_info <span style=color:#66d9ef>ON</span> table_info.database_name <span style=color:#f92672>=</span> primary_info.database_name
            <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> primary_info.table_name
            <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> (
                <span style=color:#66d9ef>SELECT</span>
                    table_schema <span style=color:#66d9ef>AS</span> database_name,
                    table_name,
                    <span style=color:#a6e22e>GROUP_CONCAT</span>(
                        <span style=color:#a6e22e>CONCAT</span>(
                            column_name,
                            <span style=color:#e6db74>&#39;=&#39;</span>,
                            referenced_table_name,
                            <span style=color:#e6db74>&#39;.&#39;</span>,
                            referenced_column_name
                        )
                    ) <span style=color:#66d9ef>AS</span> referenced
                <span style=color:#66d9ef>FROM</span>
                    information_schema.KEY_COLUMN_USAGE
                <span style=color:#66d9ef>WHERE</span>
                    referenced_table_name <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
                <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
                    table_schema,
                    table_name
            ) <span style=color:#66d9ef>AS</span> reference_info <span style=color:#66d9ef>ON</span> table_info.database_name <span style=color:#f92672>=</span> reference_info.database_name
            <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> reference_info.table_name
    ) <span style=color:#66d9ef>AS</span> key_info <span style=color:#66d9ef>ON</span> table_info.table_schema <span style=color:#f92672>=</span> key_info.database_name
    <span style=color:#66d9ef>AND</span> table_info.table_name <span style=color:#f92672>=</span> key_info.table_name
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_info.table_schema,
    table_info.table_name;
</code></pre></div><h2 id=データベース>
データベース
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9>#</a>
</h2>
<h3 id=データベースの新規作成>
データベースの新規作成
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%ae%e6%96%b0%e8%a6%8f%e4%bd%9c%e6%88%90>#</a>
</h3>
<blockquote class="book-hint info">
<ul>
<li>CHARACTER SET 文字コード
<ul>
<li>utf8mb4 絵文字にも対応。</li>
</ul>
</li>
<li>COLLATE 照合順序
<ul>
<li>utf8mb4_bin: 全ての区別あり（大文字小文字/全角半角の区別あり）</li>
<li>utf8mb4_general_ci: 大文字小文字の区別なし</li>
<li>utf8mb4_unicode_ci: 大文字小文字/全角半角の区別なし</li>
</ul>
</li>
</ul>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> sample_db <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> <span style=color:#f92672>=</span> utf8mb4 <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>COLLATE</span> <span style=color:#f92672>=</span> utf8mb4_bin;
</code></pre></div><h3 id=データベースの文字コードの変更>
データベースの文字コードの変更
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%ae%e6%96%87%e5%ad%97%e3%82%b3%e3%83%bc%e3%83%89%e3%81%ae%e5%a4%89%e6%9b%b4>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>DATABASE</span> sample_db <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> <span style=color:#f92672>=</span> utf8mb4;
</code></pre></div><h2 id=ユーザー>
ユーザー
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc>#</a>
</h2>
<h3 id=ユーザーの新規作成>
ユーザーの新規作成
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%ae%e6%96%b0%e8%a6%8f%e4%bd%9c%e6%88%90>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span> <span style=color:#66d9ef>IDENTIFIED</span> <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;sample_password&#39;</span>;
</code></pre></div><h3 id=ユーザーのパスワードの設定>
ユーザーのパスワードの設定
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%ae%e3%83%91%e3%82%b9%e3%83%af%e3%83%bc%e3%83%89%e3%81%ae%e8%a8%ad%e5%ae%9a>#</a>
</h3>
<h4 id=ログイン中ユーザーのパスワードの設定>
ログイン中ユーザーのパスワードの設定
<a class=anchor href=#%e3%83%ad%e3%82%b0%e3%82%a4%e3%83%b3%e4%b8%ad%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%ae%e3%83%91%e3%82%b9%e3%83%af%e3%83%bc%e3%83%89%e3%81%ae%e8%a8%ad%e5%ae%9a>#</a>
</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- ログイン中のユーザーを確認
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_USER</span>();
<span style=color:#75715e>-- パスワードを設定
</span><span style=color:#75715e></span><span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#f92672>=</span> <span style=color:#a6e22e>PASSWORD</span>(<span style=color:#e6db74>&#39;sample_password&#39;</span>);
</code></pre></div><h4 id=特定のユーザーのパスワードの設定>
特定のユーザーのパスワードの設定
<a class=anchor href=#%e7%89%b9%e5%ae%9a%e3%81%ae%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%ae%e3%83%91%e3%82%b9%e3%83%af%e3%83%bc%e3%83%89%e3%81%ae%e8%a8%ad%e5%ae%9a>#</a>
</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#66d9ef>FOR</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>PASSWORD</span>(<span style=color:#e6db74>&#39;sample_password&#39;</span>);
</code></pre></div><h3 id=ユーザーの権限の設定>
ユーザーの権限の設定
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%ae%e6%a8%a9%e9%99%90%e3%81%ae%e8%a8%ad%e5%ae%9a>#</a>
</h3>
<h4 id=データベース権限>
データベース権限
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e6%a8%a9%e9%99%90>#</a>
</h4>
<p>sample_user に sample_db の全テーブルの全ての権限を付与</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>ON</span> sample_db.<span style=color:#f92672>*</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span>;
</code></pre></div><p>sample_user に sample_db の全テーブルの参照/新規登録の権限を付与</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>SELECT</span>, <span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>ON</span> sample_db.<span style=color:#f92672>*</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span>;
</code></pre></div><h4 id=テーブル権限>
テーブル権限
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e6%a8%a9%e9%99%90>#</a>
</h4>
<p>sample_user に sample_db の sample_table の参照権限を付与</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>ON</span> sample_db.sample_table <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span>;
</code></pre></div><p>sample_user の既存の権限を変更せずに 1時間あたりの発行可能クエリ数を制限
<blockquote class="book-hint info">
<ul>
<li>MAX_QUERIES_PER_HOUR count クエリ数</li>
<li>MAX_UPDATES_PER_HOUR count 更新件数</li>
<li>MAX_CONNECTIONS_PER_HOUR count コネクション数（同時接続の最大数を制限）</li>
</ul>
<p>(結果がクエリーキャッシュから得られたクエリーは、MAX_QUERIES_PER_HOUR 制限に対してカウントされません。) count が 0 (デフォルト) である場合、これは、このアカウントに対する制限が存在しないことを示します。
</blockquote>
</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>USAGE</span> <span style=color:#66d9ef>ON</span> <span style=color:#f92672>*</span>.<span style=color:#f92672>*</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span> <span style=color:#66d9ef>WITH</span> MAX_QUERIES_PER_HOUR <span style=color:#ae81ff>100</span>;
</code></pre></div><h4 id=カラム権限>
カラム権限
<a class=anchor href=#%e3%82%ab%e3%83%a9%e3%83%a0%e6%a8%a9%e9%99%90>#</a>
</h4>
<p>カラム権限で付与される権限 INSERT, SELECT, UPDATE の後にカッコで囲まれた 1つ以上のカラムを指定</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>SELECT</span> (sample_column_1, sample_column_2), <span style=color:#66d9ef>UPDATE</span> (sample_column_1) <span style=color:#66d9ef>ON</span> sample_db.sample_table <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;sample_user&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span>;
</code></pre></div><h2 id=権限>
権限
<a class=anchor href=#%e6%a8%a9%e9%99%90>#</a>
</h2>
<h3 id=ユーザーごとの権限の一覧>
ユーザーごとの権限の一覧
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%94%e3%81%a8%e3%81%ae%e6%a8%a9%e9%99%90%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
    is_grantable <span style=color:#66d9ef>AS</span> is_grantable,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
<span style=color:#66d9ef>FROM</span>
    information_schema.user_privileges
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    grantee,
    is_grantable
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    grantee;
</code></pre></div><h3 id=データベースごとの権限の一覧>
データベースごとの権限の一覧
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%94%e3%81%a8%e3%81%ae%e6%a8%a9%e9%99%90%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
    table_schema <span style=color:#66d9ef>AS</span> db,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
<span style=color:#66d9ef>FROM</span>
    information_schema.schema_privileges
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    grantee,
    table_schema
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    grantee,
    table_schema;
</code></pre></div><h3 id=テーブルごとの権限の一覧>
テーブルごとの権限の一覧
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%81%ae%e6%a8%a9%e9%99%90%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
    table_schema <span style=color:#66d9ef>AS</span> db,
    table_name <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
<span style=color:#66d9ef>FROM</span>
    information_schema.table_privileges
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    grantee,
    table_schema,
    table_name
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    grantee,
    table_schema,
    table_name;
</code></pre></div><h3 id=カラムごとの権限の一覧>
カラムごとの権限の一覧
<a class=anchor href=#%e3%82%ab%e3%83%a9%e3%83%a0%e3%81%94%e3%81%a8%e3%81%ae%e6%a8%a9%e9%99%90%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
    table_schema <span style=color:#66d9ef>AS</span> db,
    table_name <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
    column_name <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>column</span><span style=color:#f92672>`</span>,
    <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
<span style=color:#66d9ef>FROM</span>
    information_schema.column_privileges
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    grantee,
    table_schema,
    table_name,
    column_name
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    grantee,
    table_schema,
    table_name,
    column_name;
</code></pre></div><h3 id=ユーザーごとデータベースごとテーブルごとカラムごとの権限の一覧>
ユーザーごと・データベースごと・テーブルごと・カラムごとの権限の一覧
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b6%e3%83%bc%e3%81%94%e3%81%a8%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%94%e3%81%a8%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%94%e3%81%a8%e3%82%ab%e3%83%a9%e3%83%a0%e3%81%94%e3%81%a8%e3%81%ae%e6%a8%a9%e9%99%90%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#f92672>*</span>
<span style=color:#66d9ef>FROM</span>
    (
        <span style=color:#66d9ef>SELECT</span>
            grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
            is_grantable <span style=color:#66d9ef>AS</span> is_grantable,
            <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#66d9ef>AS</span> db,
            <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
            <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>column</span><span style=color:#f92672>`</span>,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
        <span style=color:#66d9ef>FROM</span>
            information_schema.user_privileges
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            grantee,
            is_grantable
        <span style=color:#66d9ef>UNION</span>
        <span style=color:#66d9ef>ALL</span>
        <span style=color:#66d9ef>SELECT</span>
            grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
            is_grantable <span style=color:#66d9ef>AS</span> is_grantable,
            table_schema <span style=color:#66d9ef>AS</span> db,
            <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
            <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>column</span><span style=color:#f92672>`</span>,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
        <span style=color:#66d9ef>FROM</span>
            information_schema.schema_privileges
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            grantee,
            is_grantable,
            table_schema
        <span style=color:#66d9ef>UNION</span>
        <span style=color:#66d9ef>ALL</span>
        <span style=color:#66d9ef>SELECT</span>
            grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
            is_grantable <span style=color:#66d9ef>AS</span> is_grantable,
            table_schema <span style=color:#66d9ef>AS</span> db,
            table_name <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
            <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>column</span><span style=color:#f92672>`</span>,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
        <span style=color:#66d9ef>FROM</span>
            information_schema.table_privileges
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            grantee,
            is_grantable,
            table_schema,
            table_name
        <span style=color:#66d9ef>UNION</span>
        <span style=color:#66d9ef>ALL</span>
        <span style=color:#66d9ef>SELECT</span>
            grantee <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>user</span>,
            is_grantable <span style=color:#66d9ef>AS</span> is_grantable,
            table_schema <span style=color:#66d9ef>AS</span> db,
            table_name <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
            column_name <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>column</span><span style=color:#f92672>`</span>,
            <span style=color:#a6e22e>GROUP_CONCAT</span>(privilege_type) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>privileges</span>
        <span style=color:#66d9ef>FROM</span>
            information_schema.column_privileges
        <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
            grantee,
            is_grantable,
            table_schema,
            table_name,
            column_name
    ) <span style=color:#66d9ef>AS</span> authority
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    <span style=color:#66d9ef>user</span>,
    db,
    <span style=color:#f92672>`</span><span style=color:#66d9ef>table</span><span style=color:#f92672>`</span>,
    <span style=color:#f92672>`</span><span style=color:#66d9ef>column</span><span style=color:#f92672>`</span>;
</code></pre></div><h2 id=日付時刻>
日付・時刻
<a class=anchor href=#%e6%97%a5%e4%bb%98%e6%99%82%e5%88%bb>#</a>
</h2>
<p><a href=https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html>MySQL Reference Manual - Date and Time Functions</a></p>
<h3 id=現在時刻>
現在時刻
<a class=anchor href=#%e7%8f%be%e5%9c%a8%e6%99%82%e5%88%bb>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>NOW</span>(); <span style=color:#75715e>-- 2020-01-05 13:30:10
</span></code></pre></div><h3 id=現在時刻の時刻のみ>
現在時刻の時刻のみ
<a class=anchor href=#%e7%8f%be%e5%9c%a8%e6%99%82%e5%88%bb%e3%81%ae%e6%99%82%e5%88%bb%e3%81%ae%e3%81%bf>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_TIME</span>(); <span style=color:#75715e>-- 13:30:10
</span></code></pre></div><h3 id=今日>
今日
<a class=anchor href=#%e4%bb%8a%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_DATE</span>(); <span style=color:#75715e>-- 2020-01-05
</span></code></pre></div><h3 id=昨日>
昨日
<a class=anchor href=#%e6%98%a8%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_DATE</span>() <span style=color:#f92672>-</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> DAY; <span style=color:#75715e>-- 2020-01-04
</span></code></pre></div><h3 id=明日>
明日
<a class=anchor href=#%e6%98%8e%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_DATE</span>() <span style=color:#f92672>+</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> DAY; <span style=color:#75715e>-- 2020-01-06
</span></code></pre></div><h3 id=1週間前>
1週間前
<a class=anchor href=#1%e9%80%b1%e9%96%93%e5%89%8d>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_DATE</span>() <span style=color:#f92672>-</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>7</span> DAY; <span style=color:#75715e>-- 2019-12-29
</span></code></pre></div><h3 id=1週間後>
1週間後
<a class=anchor href=#1%e9%80%b1%e9%96%93%e5%be%8c>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CURRENT_DATE</span>() <span style=color:#f92672>+</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>7</span> DAY; <span style=color:#75715e>-- 2020-01-12
</span></code></pre></div><h3 id=当月1日>
当月1日
<a class=anchor href=#%e5%bd%93%e6%9c%881%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#e6db74>&#39;%Y-%m-01&#39;</span>); <span style=color:#75715e>-- 2020-01-01
</span></code></pre></div><h3 id=当月末日>
当月末日
<a class=anchor href=#%e5%bd%93%e6%9c%88%e6%9c%ab%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>LAST_DAY</span>(<span style=color:#66d9ef>CURRENT_DATE</span>()); <span style=color:#75715e>-- 2020-01-31
</span></code></pre></div><h3 id=当月1日当月末日>
当月1日〜当月末日
<a class=anchor href=#%e5%bd%93%e6%9c%881%e6%97%a5%e5%bd%93%e6%9c%88%e6%9c%ab%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#f92672>*</span>
<span style=color:#66d9ef>FROM</span>
    sample_table
<span style=color:#66d9ef>WHERE</span>
<span style=display:block;width:100%;background-color:#3c3d38>    sample_column <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#e6db74>&#39;%Y-%m-01&#39;</span>)
</span><span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>AND</span> sample_column <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>LAST_DAY</span>(<span style=color:#66d9ef>CURRENT_DATE</span>());
</span></code></pre></div><h3 id=先月1日>
先月1日
<a class=anchor href=#%e5%85%88%e6%9c%881%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>DATE_SUB</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> MONTH), <span style=color:#e6db74>&#39;%Y-%m-01&#39;</span>); <span style=color:#75715e>-- 2019-12-01
</span><span style=color:#75715e>-- or
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> MONTH), <span style=color:#e6db74>&#39;%Y-%m-01&#39;</span>); <span style=color:#75715e>-- 2019-12-01
</span></code></pre></div><h3 id=先月末日>
先月末日
<a class=anchor href=#%e5%85%88%e6%9c%88%e6%9c%ab%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>LAST_DAY</span>(<span style=color:#a6e22e>DATE_SUB</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> MONTH)); <span style=color:#75715e>-- 2019-12-31
</span><span style=color:#75715e>-- or
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>LAST_DAY</span>(<span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> MONTH)); <span style=color:#75715e>-- 2019-12-31
</span></code></pre></div><h3 id=来月1日>
来月1日
<a class=anchor href=#%e6%9d%a5%e6%9c%881%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> MONTH), <span style=color:#e6db74>&#39;%Y-%m-01&#39;</span>); <span style=color:#75715e>-- 2020-02-01
</span></code></pre></div><h3 id=来月末日>
来月末日
<a class=anchor href=#%e6%9d%a5%e6%9c%88%e6%9c%ab%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>LAST_DAY</span>(<span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#66d9ef>CURRENT_DATE</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> MONTH)); <span style=color:#75715e>-- 2020-02-29
</span></code></pre></div><h3 id=昨年>
昨年
<a class=anchor href=#%e6%98%a8%e5%b9%b4>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>((<span style=color:#a6e22e>NOW</span>() <span style=color:#f92672>-</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>YEAR</span>), <span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>);
</code></pre></div><h3 id=来年>
来年
<a class=anchor href=#%e6%9d%a5%e5%b9%b4>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>((<span style=color:#a6e22e>NOW</span>() <span style=color:#f92672>+</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>YEAR</span>), <span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>);
</code></pre></div><h3 id=3年前>
3年前
<a class=anchor href=#3%e5%b9%b4%e5%89%8d>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>((<span style=color:#a6e22e>NOW</span>() <span style=color:#f92672>-</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>YEAR</span>), <span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>);
</code></pre></div><h3 id=3年後>
3年後
<a class=anchor href=#3%e5%b9%b4%e5%be%8c>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>((<span style=color:#a6e22e>NOW</span>() <span style=color:#f92672>+</span> <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>YEAR</span>), <span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>);
</code></pre></div><h3 id=日付の差分>
日付の差分
<a class=anchor href=#%e6%97%a5%e4%bb%98%e3%81%ae%e5%b7%ae%e5%88%86>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATEDIFF</span>(<span style=color:#e6db74>&#39;2020-12-31 23:59:59&#39;</span>,<span style=color:#e6db74>&#39;2020-12-30&#39;</span>); <span style=color:#75715e>-- 1
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATEDIFF</span>(<span style=color:#e6db74>&#39;2020-11-30 23:59:59&#39;</span>,<span style=color:#e6db74>&#39;2020-12-31&#39;</span>); <span style=color:#75715e>-- -31
</span></code></pre></div><h3 id=年のみ>
年のみ
<a class=anchor href=#%e5%b9%b4%e3%81%ae%e3%81%bf>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>YEAR</span>(<span style=color:#e6db74>&#39;2020-12-31&#39;</span>); <span style=color:#75715e>-- 2020
</span></code></pre></div><h3 id=月のみ>
月のみ
<a class=anchor href=#%e6%9c%88%e3%81%ae%e3%81%bf>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MONTH</span>(<span style=color:#e6db74>&#39;2020-12-31&#39;</span>); <span style=color:#75715e>-- 12
</span><span style=color:#75715e>-- or
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DAYOFMONTH</span>(<span style=color:#e6db74>&#39;2020-12-31&#39;</span>); <span style=color:#75715e>-- 12
</span></code></pre></div><h3 id=日のみ>
日のみ
<a class=anchor href=#%e6%97%a5%e3%81%ae%e3%81%bf>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DAY</span>(<span style=color:#e6db74>&#39;2020-12-31&#39;</span>); <span style=color:#75715e>-- 31
</span><span style=color:#75715e>-- or
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DAYOFMONTH</span>(<span style=color:#e6db74>&#39;2020-12-31&#39;</span>); <span style=color:#75715e>-- 31
</span></code></pre></div><h3 id=曜日>
曜日
<a class=anchor href=#%e6%9b%9c%e6%97%a5>#</a>
</h3>
<p>曜日インデックス (1 = Sunday、2 = Monday、…、7 = Saturday)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DAYOFWEEK</span>(<span style=color:#e6db74>&#39;2007-02-03&#39;</span>); <span style=color:#75715e>-- 7
</span></code></pre></div><p>曜日インデックス (0 = Monday、1 = Tuesday、…6 = Sunday)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>WEEKDAY</span>(<span style=color:#e6db74>&#39;2008-02-03 22:23:00&#39;</span>); <span style=color:#75715e>-- 6
</span></code></pre></div><h3 id=曜日日本語>
曜日（日本語）
<a class=anchor href=#%e6%9b%9c%e6%97%a5%e6%97%a5%e6%9c%ac%e8%aa%9e>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#66d9ef>CASE</span>
        <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;%w&#39;</span>)
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;日&#39;</span>
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;月&#39;</span>
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;火&#39;</span>
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;水&#39;</span>
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>4</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;木&#39;</span>
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>5</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;金&#39;</span>
        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>6</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;土&#39;</span>
    END;
</code></pre></div><h3 id=年内の歴週>
年内の歴週
<a class=anchor href=#%e5%b9%b4%e5%86%85%e3%81%ae%e6%ad%b4%e9%80%b1>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>WEEKOFYEAR</span>(<span style=color:#e6db74>&#39;2008-02-20&#39;</span>); <span style=color:#75715e>-- 8
</span></code></pre></div><h3 id=年内の通日>
年内の通日
<a class=anchor href=#%e5%b9%b4%e5%86%85%e3%81%ae%e9%80%9a%e6%97%a5>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DAYOFYEAR</span>(<span style=color:#e6db74>&#39;2007-02-03&#39;</span>); <span style=color:#75715e>-- 34
</span></code></pre></div><h2 id=便利関数>
便利関数
<a class=anchor href=#%e4%be%bf%e5%88%a9%e9%96%a2%e6%95%b0>#</a>
</h2>
<h3 id=値がnullの場合の初期値を返却-ifnull>
値がNULLの場合の初期値を返却 IFNULL
<a class=anchor href=#%e5%80%a4%e3%81%8cnull%e3%81%ae%e5%a0%b4%e5%90%88%e3%81%ae%e5%88%9d%e6%9c%9f%e5%80%a4%e3%82%92%e8%bf%94%e5%8d%b4-ifnull>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#a6e22e>IFNULL</span>(name, <span style=color:#e6db74>&#39;anonym&#39;</span>) <span style=color:#66d9ef>AS</span> name
</span><span style=color:#66d9ef>FROM</span>
    sample_table;
</code></pre></div><h3 id=最初のnull以外の値を返却-coalesce>
最初のNULL以外の値を返却 COALESCE
<a class=anchor href=#%e6%9c%80%e5%88%9d%e3%81%aenull%e4%bb%a5%e5%a4%96%e3%81%ae%e5%80%a4%e3%82%92%e8%bf%94%e5%8d%b4-coalesce>#</a>
</h3>
<p>NULL以外の値がない場合 NULLを返却</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#a6e22e>COALESCE</span>(
</span><span style=display:block;width:100%;background-color:#3c3d38>        phone_number_smart_private,
</span><span style=display:block;width:100%;background-color:#3c3d38>        phone_number_home,
</span><span style=display:block;width:100%;background-color:#3c3d38>        phone_number_office,
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>NULL</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    ) <span style=color:#66d9ef>AS</span> phone_number
</span><span style=color:#66d9ef>FROM</span>
    sample_table;
</code></pre></div><h3 id=カンマ区切りで結合-group_concat>
カンマ区切りで結合 GROUP_CONCAT
<a class=anchor href=#%e3%82%ab%e3%83%b3%e3%83%9e%e5%8c%ba%e5%88%87%e3%82%8a%e3%81%a7%e7%b5%90%e5%90%88-group_concat>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#a6e22e>GROUP_CONCAT</span>(id) <span style=color:#66d9ef>AS</span> id <span style=color:#75715e>-- &#39;1,2,3,4,5&#39;
</span></span><span style=color:#75715e></span><span style=color:#66d9ef>FROM</span>
    sample_table
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    id;
</code></pre></div><h3 id=カンマ区切りの値を検索-find_in_set>
カンマ区切りの値を検索 FIND_IN_SET
<a class=anchor href=#%e3%82%ab%e3%83%b3%e3%83%9e%e5%8c%ba%e5%88%87%e3%82%8a%e3%81%ae%e5%80%a4%e3%82%92%e6%a4%9c%e7%b4%a2-find_in_set>#</a>
</h3>
<blockquote class="book-hint danger">
INDEXが効かないため要注意
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#f92672>*</span>
<span style=color:#66d9ef>FROM</span>
    sample_table
<span style=color:#66d9ef>WHERE</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#a6e22e>FIND_IN_SET</span>(id, <span style=color:#e6db74>&#39;1,2,3,4&#39;</span>);
</span></code></pre></div><h3 id=指定した順番に並べ替え-field>
指定した順番に並べ替え FIELD
<a class=anchor href=#%e6%8c%87%e5%ae%9a%e3%81%97%e3%81%9f%e9%a0%86%e7%95%aa%e3%81%ab%e4%b8%a6%e3%81%b9%e6%9b%bf%e3%81%88-field>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#f92672>*</span>
<span style=color:#66d9ef>FROM</span>
    sample_table
<span style=color:#66d9ef>WHERE</span>
    id <span style=color:#66d9ef>IN</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>)
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#a6e22e>FIELD</span>(id, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>);
</span></code></pre></div><h2 id=条件分岐-case>
条件分岐 CASE
<a class=anchor href=#%e6%9d%a1%e4%bb%b6%e5%88%86%e5%b2%90-case>#</a>
</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
<span style=display:block;width:100%;background-color:#3c3d38>  <span style=color:#66d9ef>CASE</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>WHEN</span> active_flag <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;ON&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>WHEN</span> active_flag <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;OFF&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;&#39;</span> END
</span><span style=color:#66d9ef>FROM</span>
  sample_table;
</code></pre></div><hr>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    id,
    name,
    score,
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>CASE</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>WHEN</span> score <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>80</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;Excellent&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>80</span> <span style=color:#f92672>&gt;</span> score <span style=color:#66d9ef>AND</span> score <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>70</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;Good&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>70</span> <span style=color:#f92672>&gt;</span> score <span style=color:#66d9ef>AND</span> score <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>60</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;Average&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>60</span> <span style=color:#f92672>&gt;</span> score <span style=color:#66d9ef>AND</span> score <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>50</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;Below Average&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>50</span> <span style=color:#f92672>&gt;</span> score <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;Poor&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>        <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;&#39;</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    END <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;evaluation&#39;</span>
</span><span style=color:#66d9ef>FROM</span>
    scores;
</code></pre></div><h2 id=便利sql>
便利SQL
<a class=anchor href=#%e4%be%bf%e5%88%a9sql>#</a>
</h2>
<h3 id=select句の値を変数にセット>
SELECT句の値を変数にセット
<a class=anchor href=#select%e5%8f%a5%e3%81%ae%e5%80%a4%e3%82%92%e5%a4%89%e6%95%b0%e3%81%ab%e3%82%bb%e3%83%83%e3%83%88>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#ae81ff>100</span>,
    <span style=color:#e6db74>&#39;sample&#39;</span>
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#66d9ef>INTO</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#f92672>@</span>HOGE,
</span><span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#f92672>@</span>FOO;
</span>
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>@</span>HOGE, <span style=color:#f92672>@</span>FOO;
<span style=color:#f92672>+-------+--------+</span>
<span style=color:#f92672>|</span> <span style=color:#f92672>@</span>HOGE <span style=color:#f92672>|</span> <span style=color:#f92672>@</span>FOO   <span style=color:#f92672>|</span>
<span style=color:#f92672>+-------+--------+</span>
<span style=color:#f92672>|</span>   <span style=color:#ae81ff>100</span> <span style=color:#f92672>|</span> sample <span style=color:#f92672>|</span>
<span style=color:#f92672>+-------+--------+</span>
</code></pre></div><h3 id=select-したデータを-insert>
SELECT したデータを INSERT
<a class=anchor href=#select-%e3%81%97%e3%81%9f%e3%83%87%e3%83%bc%e3%82%bf%e3%82%92-insert>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span>
    <span style=color:#a6e22e>sample_table_1</span> (sample_column_1, sample_column_2, sample_column_3)
<span style=color:#66d9ef>SELECT</span>
    sample_column_1,
    sample_column_2,
    sample_column_3
<span style=color:#66d9ef>FROM</span>
    sample_table_2;
</code></pre></div><p>一部の値を固定値で登録（以下の例では sample_column_3 に 固定値 &lsquo;hoge&rsquo; を登録</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span>
    <span style=color:#a6e22e>sample_table_1</span> (sample_column_1, sample_column_2, sample_column_3)
<span style=color:#66d9ef>SELECT</span>
    sample_column_1,
    sample_column_2,
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#e6db74>&#39;hoge&#39;</span> <span style=color:#66d9ef>AS</span> sample_column_3
</span><span style=color:#66d9ef>FROM</span>
    sample_table_2;
</code></pre></div><h3 id=特定のカラムの値が重複しているレコードを抽出-havinggroup-by>
特定のカラムの値が重複しているレコードを抽出 HAVING/GROUP BY
<a class=anchor href=#%e7%89%b9%e5%ae%9a%e3%81%ae%e3%82%ab%e3%83%a9%e3%83%a0%e3%81%ae%e5%80%a4%e3%81%8c%e9%87%8d%e8%a4%87%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e3%83%ac%e3%82%b3%e3%83%bc%e3%83%89%e3%82%92%e6%8a%bd%e5%87%ba-havinggroup-by>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    sample_column,
    <span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>AS</span> count
<span style=color:#66d9ef>FROM</span>
    sample_table
<span style=display:block;width:100%;background-color:#3c3d38><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    sample_column
</span><span style=display:block;width:100%;background-color:#3c3d38><span style=color:#66d9ef>HAVING</span>
</span><span style=display:block;width:100%;background-color:#3c3d38>    count <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>
</span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    sample_column;
</code></pre></div><h2 id=置換>
置換
<a class=anchor href=#%e7%bd%ae%e6%8f%9b>#</a>
</h2>
<h3 id=文字列を置換して更新>
文字列を置換して更新
<a class=anchor href=#%e6%96%87%e5%ad%97%e5%88%97%e3%82%92%e7%bd%ae%e6%8f%9b%e3%81%97%e3%81%a6%e6%9b%b4%e6%96%b0>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>UPDATE</span>
    sample_table
<span style=color:#66d9ef>SET</span>
<span style=display:block;width:100%;background-color:#3c3d38>    sample_column <span style=color:#f92672>=</span> <span style=color:#66d9ef>REPLACE</span>(sample_column, <span style=color:#e6db74>&#39;Search String&#39;</span>, <span style=color:#e6db74>&#39;Replacement String&#39;</span>)
</span><span style=color:#66d9ef>WHERE</span>
    sample_column <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%Search String%&#39;</span>;
</code></pre></div><h2 id=改行コード>
改行コード
<a class=anchor href=#%e6%94%b9%e8%a1%8c%e3%82%b3%e3%83%bc%e3%83%89>#</a>
</h2>
<h3 id=carriage-return-cr>
Carriage Return (CR)
<a class=anchor href=#carriage-return-cr>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#960050;background-color:#1e0010>\</span>r
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>13</span>)
</code></pre></div><h3 id=line-feed-lf>
Line Feed (LF)
<a class=anchor href=#line-feed-lf>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#960050;background-color:#1e0010>\</span>n
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>10</span>)
</code></pre></div><h3 id=改行コードを半角スペースに置換>
改行コードを半角スペースに置換
<a class=anchor href=#%e6%94%b9%e8%a1%8c%e3%82%b3%e3%83%bc%e3%83%89%e3%82%92%e5%8d%8a%e8%a7%92%e3%82%b9%e3%83%9a%e3%83%bc%e3%82%b9%e3%81%ab%e7%bd%ae%e6%8f%9b>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(sample_column, <span style=color:#e6db74>&#39;\r\n&#39;</span>, <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#e6db74>&#39;\r&#39;</span>, <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#e6db74>&#39;\n&#39;</span>, <span style=color:#e6db74>&#39; &#39;</span>)
</span><span style=color:#66d9ef>FROM</span>
    sample_table;
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(sample_column, <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>13</span>) <span style=color:#f92672>+</span> <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>10</span>), <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>13</span>), <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>10</span>), <span style=color:#e6db74>&#39; &#39;</span>)
</span><span style=color:#66d9ef>FROM</span>
    sample_table;
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>UPDATE</span>
    sample_table
<span style=color:#66d9ef>SET</span>
<span style=display:block;width:100%;background-color:#3c3d38>    sample_column <span style=color:#f92672>=</span> <span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(sample_column, <span style=color:#e6db74>&#39;\r\n&#39;</span>, <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#e6db74>&#39;\r&#39;</span>, <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#e6db74>&#39;\n&#39;</span>,<span style=color:#e6db74>&#39; &#39;</span>);
</span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>UPDATE</span>
    sample_table
<span style=color:#66d9ef>SET</span>
<span style=display:block;width:100%;background-color:#3c3d38>    <span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(<span style=color:#66d9ef>REPLACE</span>(sample_column, <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>13</span>) <span style=color:#f92672>+</span> <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>10</span>), <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>13</span>), <span style=color:#e6db74>&#39; &#39;</span>), <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>10</span>), <span style=color:#e6db74>&#39; &#39;</span>);
</span></code></pre></div><h2 id=view>
VIEW
<a class=anchor href=#view>#</a>
</h2>
<h3 id=viewの一括drop文>
VIEWの一括DROP文
<a class=anchor href=#view%e3%81%ae%e4%b8%80%e6%8b%acdrop%e6%96%87>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#a6e22e>CONCAT</span>(<span style=color:#e6db74>&#39;DROP VIEW &#39;</span>, table_name, <span style=color:#e6db74>&#39;;&#39;</span>) <span style=color:#66d9ef>AS</span> view_drop_sql
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>WHERE</span>
    table_schema <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (
        <span style=color:#e6db74>&#39;mysql&#39;</span>,
        <span style=color:#e6db74>&#39;perfomance_schema&#39;</span>,
        <span style=color:#e6db74>&#39;information_schema&#39;</span>
    )
    <span style=color:#66d9ef>AND</span> table_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;VIEW&#39;</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><h3 id=viewの一覧を作成するcreate文の一覧>
VIEWの一覧を作成するCREATE文の一覧
<a class=anchor href=#view%e3%81%ae%e4%b8%80%e8%a6%a7%e3%82%92%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8bcreate%e6%96%87%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    <span style=color:#a6e22e>CONCAT</span>(TABLE_SCHEMA, <span style=color:#e6db74>&#39;.&#39;</span>, TABLE_NAME) <span style=color:#66d9ef>AS</span> target_view,
    <span style=color:#a6e22e>CONCAT</span>(
        <span style=color:#e6db74>&#39;CREATE ALGORITHM=UNDEFINED DEFINER=`&#39;</span>,
        DEFINER,
        <span style=color:#e6db74>&#39;` SQL SECURITY &#39;</span>,
        SECURITY_TYPE,
        <span style=color:#e6db74>&#39; VIEW `&#39;</span>,
        TABLE_NAME,
        <span style=color:#e6db74>&#39;` AS &#39;</span>,
        VIEW_DEFINITION,
        <span style=color:#e6db74>&#39;;&#39;</span>
    ) <span style=color:#66d9ef>AS</span> create_view
<span style=color:#66d9ef>FROM</span>
    information_schema.views;
</code></pre></div><h2 id=その他>
その他
<a class=anchor href=#%e3%81%9d%e3%81%ae%e4%bb%96>#</a>
</h2>
<h3 id=sqlの実行計画>
SQLの実行計画
<a class=anchor href=#sql%e3%81%ae%e5%ae%9f%e8%a1%8c%e8%a8%88%e7%94%bb>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>EXPLAIN</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sample_table <span style=color:#66d9ef>WHERE</span> sample_flag <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</code></pre></div><h3 id=一時的なテーブルの作成>
一時的なテーブルの作成
<a class=anchor href=#%e4%b8%80%e6%99%82%e7%9a%84%e3%81%aa%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e4%bd%9c%e6%88%90>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CREATE</span> TEMPORARY <span style=color:#66d9ef>TABLE</span> new_table <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> original_table
</code></pre></div><h3 id=データベースへのコネクション数>
データベースへのコネクション数
<a class=anchor href=#%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%81%b8%e3%81%ae%e3%82%b3%e3%83%8d%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e6%95%b0>#</a>
</h3>
<blockquote class="book-hint info">
threads へのアクセスには相互排他ロックは必要なく、サーバーパフォーマンスへの影響は最小です。INFORMATION_SCHEMA.PROCESSLIST と SHOW PROCESSLIST では相互排他ロックが必要になるため、パフォーマンスの低下につながります。
<a href=https://dev.mysql.com/doc/refman/5.6/ja/performance-schema-threads-table.html>https://dev.mysql.com/doc/refman/5.6/ja/performance-schema-threads-table.html</a>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    processlist_host,
    <span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>AS</span> connection_count
<span style=color:#66d9ef>FROM</span>
    performance_schema.threads
<span style=color:#66d9ef>WHERE</span>
    TYPE <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;FOREGROUND&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>
    processlist_host
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    processlist_host;
</code></pre></div><h3 id=プロセスを終了kill>
プロセスを終了(KILL)
<a class=anchor href=#%e3%83%97%e3%83%ad%e3%82%bb%e3%82%b9%e3%82%92%e7%b5%82%e4%ba%86kill>#</a>
</h3>
<p>プロセスIDを確認</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> PROCESSLIST;
<span style=color:#f92672>+----+-------------+----------------+-----------+---------+------+----------+------------------+</span>
<span style=color:#f92672>|</span> Id <span style=color:#f92672>|</span> <span style=color:#66d9ef>User</span>        <span style=color:#f92672>|</span> Host           <span style=color:#f92672>|</span> db        <span style=color:#f92672>|</span> Command <span style=color:#f92672>|</span> <span style=color:#66d9ef>Time</span> <span style=color:#f92672>|</span> State    <span style=color:#f92672>|</span> Info             <span style=color:#f92672>|</span>
<span style=color:#f92672>+----+-------------+----------------+-----------+---------+------+----------+------------------+</span>
<span style=color:#f92672>|</span>  <span style=color:#ae81ff>8</span> <span style=color:#f92672>|</span> sample_user <span style=color:#f92672>|</span> localhost:XXXX <span style=color:#f92672>|</span> sample_db <span style=color:#f92672>|</span> Sleep   <span style=color:#f92672>|</span>   <span style=color:#ae81ff>40</span> <span style=color:#f92672>|</span>          <span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span>             <span style=color:#f92672>|</span>
<span style=color:#f92672>|</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>|</span> sample_user <span style=color:#f92672>|</span> localhost:XXXX <span style=color:#f92672>|</span> sample_db <span style=color:#f92672>|</span> Query   <span style=color:#f92672>|</span>    <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>starting</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>SHOW</span> PROCESSLIST <span style=color:#f92672>|</span>
<span style=color:#f92672>+----+-------------+----------------+-----------+---------+------+----------+------------------+</span>
<span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</code></pre></div><p>MySQL の<code>KILL</code>コマンドでは1つのプロセスIDのみ指定可(複数IDの同時指定は不可)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>KILL</span> <span style=color:#ae81ff>8</span>
</code></pre></div><h3 id=特定の時間を経過しているプロセスを確認>
特定の時間を経過しているプロセスを確認
<a class=anchor href=#%e7%89%b9%e5%ae%9a%e3%81%ae%e6%99%82%e9%96%93%e3%82%92%e7%b5%8c%e9%81%8e%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e3%83%97%e3%83%ad%e3%82%bb%e3%82%b9%e3%82%92%e7%a2%ba%e8%aa%8d>#</a>
</h3>
<p>60秒以上経過しているプロセス(処理)を確認</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> information_schema.processlist <span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>time</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>59</span>;
</code></pre></div><h3 id=複数のプロセスを終了kill>
複数のプロセスを終了(KILL)
<a class=anchor href=#%e8%a4%87%e6%95%b0%e3%81%ae%e3%83%97%e3%83%ad%e3%82%bb%e3%82%b9%e3%82%92%e7%b5%82%e4%ba%86kill>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>GROUP_CONCAT</span>(id) <span style=color:#66d9ef>AS</span> id_list <span style=color:#66d9ef>FROM</span> information_schema.processlist <span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>time</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>59</span>;
<span style=color:#75715e>-- 10,11,12
</span></code></pre></div><p>mysqladmin コマンドの引数で <code>kill</code> (終了) を実行する場合は複数IDの同時指定可(カンマ区切り)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>mysqladminn kill 10,11,12 -h localhost -u sample_user
</code></pre></div><h3 id=テーブルのロック状態>
テーブルのロック状態
<a class=anchor href=#%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e3%83%ad%e3%83%83%e3%82%af%e7%8a%b6%e6%85%8b>#</a>
</h3>
<p>ストレージエンジンがInnoDBの場合</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> information_schema.innodb_locks;
</code></pre></div><h3 id=トランザクション>
トランザクション
<a class=anchor href=#%e3%83%88%e3%83%a9%e3%83%b3%e3%82%b6%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql>BEGIN;

<span style=color:#66d9ef>UPDATE</span> sample_table <span style=color:#66d9ef>SET</span> email <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sample1@email.com&#39;</span> <span style=color:#66d9ef>WHERE</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
<span style=color:#66d9ef>UPDATE</span> sample_table <span style=color:#66d9ef>SET</span> email <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sample1@email.com&#39;</span> <span style=color:#66d9ef>WHERE</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;

<span style=color:#75715e>-- 失敗した場合は ROLLBACK;
</span><span style=color:#75715e></span>
COMMIT;
</code></pre></div><p>or</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql>START TRANSACTION;

<span style=color:#66d9ef>UPDATE</span> sample_table <span style=color:#66d9ef>SET</span> email <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sample1@email.com&#39;</span> <span style=color:#66d9ef>WHERE</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
<span style=color:#66d9ef>UPDATE</span> sample_table <span style=color:#66d9ef>SET</span> email <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sample1@email.com&#39;</span> <span style=color:#66d9ef>WHERE</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;

<span style=color:#75715e>-- 失敗した場合は ROLLBACK;
</span><span style=color:#75715e></span>
COMMIT;
</code></pre></div><h2 id=auto_increment自動採番>
AUTO_INCREMENT（自動採番）
<a class=anchor href=#auto_increment%e8%87%aa%e5%8b%95%e6%8e%a1%e7%95%aa>#</a>
</h2>
<h3 id=auto_increment自動採番の値を確認>
AUTO_INCREMENT（自動採番）の値を確認
<a class=anchor href=#auto_increment%e8%87%aa%e5%8b%95%e6%8e%a1%e7%95%aa%e3%81%ae%e5%80%a4%e3%82%92%e7%a2%ba%e8%aa%8d>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span>
    table_schema <span style=color:#66d9ef>as</span> database_name,
    table_name,
    <span style=color:#66d9ef>auto_increment</span>
<span style=color:#66d9ef>FROM</span>
    information_schema.<span style=color:#66d9ef>tables</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
    table_schema,
    table_name;
</code></pre></div><hr>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>TABLE</span> STATUS <span style=color:#66d9ef>WHERE</span> name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sample_table&#39;</span>;
</code></pre></div><hr>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>TABLE</span> STATUS <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;sample_table_prefix%&#39;</span>;
</code></pre></div><h3 id=auto_increment自動採番の値を変更>
AUTO_INCREMENT（自動採番）の値を変更
<a class=anchor href=#auto_increment%e8%87%aa%e5%8b%95%e6%8e%a1%e7%95%aa%e3%81%ae%e5%80%a4%e3%82%92%e5%a4%89%e6%9b%b4>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> sample_table <span style=color:#66d9ef>AUTO_INCREMENT</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span>;
</code></pre></div><h2 id=設定>
設定
<a class=anchor href=#%e8%a8%ad%e5%ae%9a>#</a>
</h2>
<h3 id=トランザクションのタイムアウト>
トランザクションのタイムアウト
<a class=anchor href=#%e3%83%88%e3%83%a9%e3%83%b3%e3%82%b6%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%ae%e3%82%bf%e3%82%a4%e3%83%a0%e3%82%a2%e3%82%a6%e3%83%88>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SHOW</span> GLOBAL VARIABLES <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%lock_wait_time_out&#39;</span>
<span style=color:#f92672>+----------------------+--------+</span>
<span style=color:#f92672>|</span> Variable_name        <span style=color:#f92672>|</span> Value  <span style=color:#f92672>|</span>
<span style=color:#f92672>+----------------------+--------+</span>
<span style=color:#f92672>|</span> lock_wait_timeout_ms <span style=color:#f92672>|</span> <span style=color:#ae81ff>300000</span> <span style=color:#f92672>|</span>
<span style=color:#f92672>+----------------------+--------+</span>
<span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</code></pre></div><h2 id=暗号化>
暗号化
<a class=anchor href=#%e6%9a%97%e5%8f%b7%e5%8c%96>#</a>
</h2>
<p><a href=https://dev.mysql.com/doc/refman/8.0/en/encryption-functions.html>MySQL Reference Manual - Encryption and Compression Functions</a></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SET</span> block_encryption_mode <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;aes-256-cbc&#39;</span>;
<span style=color:#66d9ef>SET</span> <span style=color:#f92672>@</span>key_str <span style=color:#f92672>=</span> <span style=color:#a6e22e>SHA2</span>(<span style=color:#e6db74>&#39;My secret passphrase&#39;</span>,<span style=color:#ae81ff>512</span>);
<span style=color:#66d9ef>SET</span> <span style=color:#f92672>@</span>init_vector <span style=color:#f92672>=</span> <span style=color:#a6e22e>RANDOM_BYTES</span>(<span style=color:#ae81ff>16</span>);
<span style=color:#66d9ef>SET</span> <span style=color:#f92672>@</span>crypt_str <span style=color:#f92672>=</span> <span style=color:#a6e22e>AES_ENCRYPT</span>(<span style=color:#e6db74>&#39;text&#39;</span>,<span style=color:#f92672>@</span>key_str,<span style=color:#f92672>@</span>init_vector);
<span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>AES_DECRYPT</span>(<span style=color:#f92672>@</span>crypt_str,<span style=color:#f92672>@</span>key_str,<span style=color:#f92672>@</span>init_vector);
<span style=color:#f92672>+-----------------------------------------------+</span>
<span style=color:#f92672>|</span> <span style=color:#a6e22e>AES_DECRYPT</span>(<span style=color:#f92672>@</span>crypt_str,<span style=color:#f92672>@</span>key_str,<span style=color:#f92672>@</span>init_vector) <span style=color:#f92672>|</span>
<span style=color:#f92672>+-----------------------------------------------+</span>
<span style=color:#f92672>|</span> <span style=color:#66d9ef>text</span>                                          <span style=color:#f92672>|</span>
<span style=color:#f92672>+-----------------------------------------------+</span>
</code></pre></div><h1 id=references>
References
<a class=anchor href=#references>#</a>
</h1>
<ul>
<li><a href=https://qiita.com/devopsCoordinator/items/9b70e506150888e190be>https://qiita.com/devopsCoordinator/items/9b70e506150888e190be</a></li>
<li><a href=https://qiita.com/CyberMergina/items/f889519e6be19c46f5f4>https://qiita.com/CyberMergina/items/f889519e6be19c46f5f4</a></li>
<li><a href=https://qiita.com/Tocyuki/items/cb613c51a0e9c6e4f23c>https://qiita.com/Tocyuki/items/cb613c51a0e9c6e4f23c</a></li>
<li><a href=https://qiita.com/marnie_ms4/items/576055abc355184c51a1>https://qiita.com/marnie_ms4/items/576055abc355184c51a1</a></li>
<li><a href=https://qiita.com/fururun02/items/148a1eee68a1fb978f06>https://qiita.com/fururun02/items/148a1eee68a1fb978f06</a></li>
<li><a href=https://qiita.com/dodonki1223/items/776a3520e45626773c60>https://qiita.com/dodonki1223/items/776a3520e45626773c60</a></li>
<li><a href=https://dev.mysql.com/doc/refman/8.0/ja/select.html>https://dev.mysql.com/doc/refman/8.0/ja/select.html</a></li>
</ul>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<h2>Tags</h2>
<ul class=tags><li><a href=/tech-blog/tags/sql>SQL</a><li><a href=/tech-blog/tags/mysql>MySQL</a><li><a href=/tech-blog/tags/memo>Memo</a></ul>
<h2>Table of Contents</h2>
<nav id=TableOfContents>
<ul>
<li><a href=#preparation>Preparation</a>
<ul>
<li><a href=#install-to-macos>Install to macOS</a></li>
<li><a href=#start>Start</a></li>
<li><a href=#check-the-vertion>Check the vertion</a></li>
<li><a href=#make-initial-settings>Make initial settings</a></li>
</ul>
</li>
<li><a href=#ログイン>ログイン</a></li>
<li><a href=#mysqlの情報>MySQLの情報</a>
<ul>
<li><a href=#バージョン>バージョン</a></li>
<li><a href=#タイムゾーン>タイムゾーン</a></li>
<li><a href=#文字コード>文字コード</a></li>
</ul>
</li>
<li><a href=#データベーステーブルカラムの一覧>データベース/テーブル/カラムの一覧</a>
<ul>
<li><a href=#データベースの一覧>データベースの一覧</a></li>
<li><a href=#テーブルの一覧>テーブルの一覧</a></li>
<li><a href=#テーブルごとの自動採番-auto_increment-の一覧>テーブルごとの自動採番 AUTO_INCREMENT の一覧</a></li>
<li><a href=#テーブルごとのカラムの一覧カンマ区切り>テーブルごとのカラムの一覧（カンマ区切り）</a></li>
<li><a href=#テーブルの物理名と論理名テーブルコメントの一覧>テーブルの物理名と論理名（テーブル・コメント）の一覧</a></li>
<li><a href=#カラムの物理名と論理名カラムコメントの一覧>カラムの物理名と論理名（カラム・コメント）の一覧</a></li>
<li><a href=#特定のカラムを含むテーブルの一覧>特定のカラムを含むテーブルの一覧</a></li>
<li><a href=#インデックスの一覧>インデックスの一覧</a></li>
<li><a href=#ビューの一覧>ビューの一覧</a></li>
</ul>
</li>
<li><a href=#テーブルのキー情報の一覧>テーブルのキー情報の一覧</a>
<ul>
<li><a href=#テーブルごとのプライマリーキー制約の一覧>テーブルごとのプライマリーキー制約の一覧</a></li>
<li><a href=#テーブルごとのユニークキー制約の一覧>テーブルごとのユニークキー制約の一覧</a></li>
<li><a href=#テーブルごとの外部キー制約の一覧>テーブルごとの外部キー制約の一覧</a></li>
<li><a href=#テーブルごとのプライマリーキーユニークキー外部キー一覧>テーブルごとのプライマリーキー・ユニークキー・外部キー一覧</a></li>
</ul>
</li>
<li><a href=#データ容量の一覧>データ容量の一覧</a>
<ul>
<li><a href=#データベースごとのサイズの一覧>データベースごとのサイズの一覧</a></li>
<li><a href=#データベースごとのテーブル数の一覧>データベースごとのテーブル数の一覧</a></li>
<li><a href=#テーブルごとのサイズの一覧>テーブルごとのサイズの一覧</a></li>
<li><a href=#テーブルごとのレコード数の一覧>テーブルごとのレコード数の一覧</a></li>
<li><a href=#データベーステーブルごとの件数容量カラムキー情報文字コードauto_incrementの一覧>データベース/テーブルごとの件数/容量/カラム/キー情報/文字コード/AUTO_INCREMENTの一覧</a></li>
</ul>
</li>
<li><a href=#データベース>データベース</a>
<ul>
<li><a href=#データベースの新規作成>データベースの新規作成</a></li>
<li><a href=#データベースの文字コードの変更>データベースの文字コードの変更</a></li>
</ul>
</li>
<li><a href=#ユーザー>ユーザー</a>
<ul>
<li><a href=#ユーザーの新規作成>ユーザーの新規作成</a></li>
<li><a href=#ユーザーのパスワードの設定>ユーザーのパスワードの設定</a></li>
<li><a href=#ユーザーの権限の設定>ユーザーの権限の設定</a></li>
</ul>
</li>
<li><a href=#権限>権限</a>
<ul>
<li><a href=#ユーザーごとの権限の一覧>ユーザーごとの権限の一覧</a></li>
<li><a href=#データベースごとの権限の一覧>データベースごとの権限の一覧</a></li>
<li><a href=#テーブルごとの権限の一覧>テーブルごとの権限の一覧</a></li>
<li><a href=#カラムごとの権限の一覧>カラムごとの権限の一覧</a></li>
<li><a href=#ユーザーごとデータベースごとテーブルごとカラムごとの権限の一覧>ユーザーごと・データベースごと・テーブルごと・カラムごとの権限の一覧</a></li>
</ul>
</li>
<li><a href=#日付時刻>日付・時刻</a>
<ul>
<li><a href=#現在時刻>現在時刻</a></li>
<li><a href=#現在時刻の時刻のみ>現在時刻の時刻のみ</a></li>
<li><a href=#今日>今日</a></li>
<li><a href=#昨日>昨日</a></li>
<li><a href=#明日>明日</a></li>
<li><a href=#1週間前>1週間前</a></li>
<li><a href=#1週間後>1週間後</a></li>
<li><a href=#当月1日>当月1日</a></li>
<li><a href=#当月末日>当月末日</a></li>
<li><a href=#当月1日当月末日>当月1日〜当月末日</a></li>
<li><a href=#先月1日>先月1日</a></li>
<li><a href=#先月末日>先月末日</a></li>
<li><a href=#来月1日>来月1日</a></li>
<li><a href=#来月末日>来月末日</a></li>
<li><a href=#昨年>昨年</a></li>
<li><a href=#来年>来年</a></li>
<li><a href=#3年前>3年前</a></li>
<li><a href=#3年後>3年後</a></li>
<li><a href=#日付の差分>日付の差分</a></li>
<li><a href=#年のみ>年のみ</a></li>
<li><a href=#月のみ>月のみ</a></li>
<li><a href=#日のみ>日のみ</a></li>
<li><a href=#曜日>曜日</a></li>
<li><a href=#曜日日本語>曜日（日本語）</a></li>
<li><a href=#年内の歴週>年内の歴週</a></li>
<li><a href=#年内の通日>年内の通日</a></li>
</ul>
</li>
<li><a href=#便利関数>便利関数</a>
<ul>
<li><a href=#値がnullの場合の初期値を返却-ifnull>値がNULLの場合の初期値を返却 IFNULL</a></li>
<li><a href=#最初のnull以外の値を返却-coalesce>最初のNULL以外の値を返却 COALESCE</a></li>
<li><a href=#カンマ区切りで結合-group_concat>カンマ区切りで結合 GROUP_CONCAT</a></li>
<li><a href=#カンマ区切りの値を検索-find_in_set>カンマ区切りの値を検索 FIND_IN_SET</a></li>
<li><a href=#指定した順番に並べ替え-field>指定した順番に並べ替え FIELD</a></li>
</ul>
</li>
<li><a href=#条件分岐-case>条件分岐 CASE</a></li>
<li><a href=#便利sql>便利SQL</a>
<ul>
<li><a href=#select句の値を変数にセット>SELECT句の値を変数にセット</a></li>
<li><a href=#select-したデータを-insert>SELECT したデータを INSERT</a></li>
<li><a href=#特定のカラムの値が重複しているレコードを抽出-havinggroup-by>特定のカラムの値が重複しているレコードを抽出 HAVING/GROUP BY</a></li>
</ul>
</li>
<li><a href=#置換>置換</a>
<ul>
<li><a href=#文字列を置換して更新>文字列を置換して更新</a></li>
</ul>
</li>
<li><a href=#改行コード>改行コード</a>
<ul>
<li><a href=#carriage-return-cr>Carriage Return (CR)</a></li>
<li><a href=#line-feed-lf>Line Feed (LF)</a></li>
<li><a href=#改行コードを半角スペースに置換>改行コードを半角スペースに置換</a></li>
</ul>
</li>
<li><a href=#view>VIEW</a>
<ul>
<li><a href=#viewの一括drop文>VIEWの一括DROP文</a></li>
<li><a href=#viewの一覧を作成するcreate文の一覧>VIEWの一覧を作成するCREATE文の一覧</a></li>
</ul>
</li>
<li><a href=#その他>その他</a>
<ul>
<li><a href=#sqlの実行計画>SQLの実行計画</a></li>
<li><a href=#一時的なテーブルの作成>一時的なテーブルの作成</a></li>
<li><a href=#データベースへのコネクション数>データベースへのコネクション数</a></li>
<li><a href=#プロセスを終了kill>プロセスを終了(KILL)</a></li>
<li><a href=#特定の時間を経過しているプロセスを確認>特定の時間を経過しているプロセスを確認</a></li>
<li><a href=#複数のプロセスを終了kill>複数のプロセスを終了(KILL)</a></li>
<li><a href=#テーブルのロック状態>テーブルのロック状態</a></li>
<li><a href=#トランザクション>トランザクション</a></li>
</ul>
</li>
<li><a href=#auto_increment自動採番>AUTO_INCREMENT（自動採番）</a>
<ul>
<li><a href=#auto_increment自動採番の値を確認>AUTO_INCREMENT（自動採番）の値を確認</a></li>
<li><a href=#auto_increment自動採番の値を変更>AUTO_INCREMENT（自動採番）の値を変更</a></li>
</ul>
</li>
<li><a href=#設定>設定</a>
<ul>
<li><a href=#トランザクションのタイムアウト>トランザクションのタイムアウト</a></li>
</ul>
</li>
<li><a href=#暗号化>暗号化</a></li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>