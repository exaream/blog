<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Mysql on Tech Blog</title><link>https://exaream.github.io/tech-blog/mysql/</link><description>Recent content in Mysql on Tech Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>exaream</copyright><lastBuildDate>Wed, 01 Jan 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://exaream.github.io/tech-blog/mysql/index.xml" rel="self" type="application/rss+xml"/><item><title>MySQL Memo</title><link>https://exaream.github.io/tech-blog/mysql/memo/</link><pubDate>Wed, 01 Jan 2020 00:00:00 +0000</pubDate><guid>https://exaream.github.io/tech-blog/mysql/memo/</guid><description>MySQL Memo # Preparation # Install to macOS # $ brew install mysql Start # $ mysql.server start Starting MySQL ....... SUCCESS! Check the vertion # $ mysql --version mysql Ver 8.0.26 for macos11.3 on x86_64 (Homebrew) Make initial settings # $ mysql_secure_installation パスワード強度検証プラグインの利用有無 パスワード強度の選択 root ユーザのパスワード設定 匿名ユーザの削除 リモートからの root ユーザとしてのログインの禁止 サンプル用 test データベースの削除 $ mysql_secure_installation Securing the MySQL server deployment. Connecting to MySQL using a blank password.</description></item><item><title/><link>https://exaream.github.io/tech-blog/mysql/error/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://exaream.github.io/tech-blog/mysql/error/</guid><description>MySQL Error # ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction # SHOW GLOBAL VARIABLES LIKE &amp;#39;innodb_lock_wait_timeout&amp;#39;; SHOW PROCESSLIST; SHOW INNODB STATUS; KILL [transaction&amp;#39;s id]; MySQLのセッションがトランザクションを使用している時に、ロックがかかった状態のまま、他のセッションがそのテーブルに対して更新しようとして、timeoutが発生。
インデックス、ユニークキー制約のないカラムに対して、トランザクションを貼ったまま放置すると、行ロックではなくてテーブル・ロックがかかってしまう。
トランザクションを貼った状態で INSERT や UPDATE し COMMIT 前にセッションが切れた場合、SELECTしても何もないため、その後 INSERT や UPDATE を使用とすると発生。
https://nagaikiyo.hatenablog.com/entry/2013/03/11/205536
https://libitte.hatenablog.jp/entry/20141129/1417254010</description></item></channel></rss>